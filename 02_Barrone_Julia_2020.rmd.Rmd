---
title: 'Homework Week #2'
author: "Julia Barrone"
date: "9/20/2020"
output: html_document
---

1a. Install & load palmerpenguins package 
```{r load_dataset}
library(palmerpenguins) #load libraries including palmer penguins, dplyr and purrr

```

1b. Head of dataset penguins 
```{r penguins_head}

head(penguins) #head of penguins 
```

1c. Str & summary on penguins

From these functions we learn that there 8 categories in the dataset: species, island, bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g, sex and year.
In total, three different spcies are included from three different islands in the dataset. There are also some NAs in the dataset. 
```{r str_and_summary}

str(penguins) #str the dataset 

summary(penguins) #summary of the dataset 
```

1d. The quantiles of bill depth across the whole data set can be found in summary 

bill_depth_mm  
Min.   :13.10  
1st Qu.:15.60  
Median :17.30  
Mean   :17.15  
3rd Qu.:18.70  
Max.   :21.50  
NA's   :2   

or also generated by the quantile function after filtering out the NAs

This information tells us that the range in bill depth ranges from 13.10 mm to 21.50 mm. The first quantile is 15.60 which represents the point at which about 25% of the data points lie below 15.60. And the third quantile is 18.70 which represents the point at which about 25% of the data points lie above 18.70 and about 75% lie below it. 
```{r summary}

summary(penguins)

penguins_no_na <- na.omit(penguins)

quantile(penguins_no_na$bill_depth_mm) #summary gives the quantiles but the quantile function also gives the information 

```

2a. Vector using dplyr. The mean of the vector is 5.25. 
```{r mean_vector}
library(dplyr) #loading dplyr for use 

my_vector <- c(1,4,7,NA,9) #creating a vector 
mean(my_vector, na.rm = TRUE) #finding the mean of my vector by removing the NA from
```


2b. Calculate mean, sd, and median of body mass across the dataset. The mean is 4207.057. The sd is 805.2158. The median is 4050.
```{r body_mass}
penguins_no_na %>% #finding mean, sd and median of the body mass in the penguins data excluding NAs 
    summarize(mean_bm = mean(body_mass_g),
            sd_bm = sd(body_mass_g),
            median_bm = median(body_mass_g)) %>%
            ungroup()

```

2c. Mean, SD and median of species in penguin dataset. Adelie body mass mean is 3706.164, sd is 458.6201	and median is 3700.	Gentoo body mass mean is 5092.437, sd is	501.4762, median is	5050.	Chinstrap body mass mean is 3733.088, sd is	384.3351, median is	3700.	On average, Gentoos have the highest body mass, next Chinstrap then Adelie
```{r species}

penguins_no_na %>% 
  filter(species == "Adelie") %>% #filtering out the adelie species in the dataset 
  select(body_mass_g) %>%  #selecting body mass column 
  summarize(mean_bm = mean(body_mass_g),
            sd_bm = sd(body_mass_g),
            median_bm = median(body_mass_g)) %>% #finding mean, sd and median of the body mass in the penguins data excluding NAs then ungrouping my pipes 
  ungroup() 



penguins_no_na %>%
  filter(species == "Gentoo") %>%#filtering out the gentoo species in the dataset 
  select(body_mass_g) %>%  #selecting body mass column 
  summarize(mean_bm = mean(body_mass_g),
            sd_bm = sd(body_mass_g),
            median_bm = median(body_mass_g)) %>% #finding mean, sd and median of the body mass in the penguins data excluding NAs then ungrouping my pipes 
  ungroup()



penguins_no_na %>%
  filter(species == "Chinstrap") %>%#filtering out the chinstrap species in the dataset 
  select(body_mass_g) %>%  #selecting body mass column 
  summarize(mean_bm = mean(body_mass_g),
            sd_bm = sd(body_mass_g),
            median_bm = median(body_mass_g)) %>% #finding mean, sd and median of the body mass in the penguins data excluding NAs then ungrouping my pipes 
  ungroup() 

```


2d. The results for Biscoe island are different in that they include body mass for adelie and gentoo species. The mean body mass for Biscoe island penguins is 4719.172, sd is 790.8601	and median is 4800. Because the data combines adelie and gentoo penguin body mass, the mean, sd and median is higher than for just adelie penguins and lower than for just gentoo penguins. 	
```{r Biscoe_island}

penguins_no_na %>% 
  filter(island == "Biscoe") %>% #filtering out Biscoe island in the dataset 
  select(body_mass_g) %>%  #selecting body mass column 
  summarize(mean_bm = mean(body_mass_g),
            sd_bm = sd(body_mass_g),
            median_bm = median(body_mass_g)) %>% #finding mean, sd and median of the body mass in the penguins data for Biscoe island excluding NAs then ungrouping my pipes 
  ungroup() 

```

2e. Using the paste function 
```{r paste}

Peng_sp_isl <- penguins_no_na %>% #creating a new vector for penguin data set with the added species_island column
  mutate(species_island = paste(penguins_no_na$species,penguins_no_na$island,sep="_")) #using the paste function to add a column of "species_island" to the penguin dataset containing no NAs

str(Peng_sp_isl) #viewing the dataset to ensure that my new column has been added 
```


3a. distribution of flipper_length_mm by species and island using boxplots. The \n in sep creates a new line between species and island when used with the cat function.  
``` {r boxplot}

#plotting flipper_length_mm by species and island using a boxplot and excluding NAs from the data
boxplot(flipper_length_mm ~ species_island, data = Peng_sp_isl)


penguin_species_isl_extracredit <- penguins_no_na %>%
  mutate(species_island = cat(paste(penguins_no_na$species,penguins_no_na$island,sep="\n"))) #extra credit problem seeing what \n does to the dataset using paste and cat.  

```

3b. relationship between average flipper length and average body mass by species and island. I see a cluster of averages of smaller flipper sizes and body mass. There appears to be an outlier that has a huge flipper size and body mass average.
```{r avg_flipper_length}

peng_3b <- Peng_sp_isl %>% #creating a new vector for penguin data set to show avg flipper length and body mass
  group_by(species_island) %>% #grouping by species island column
  summarize(avg_flip=mean(flipper_length_mm), 
            avg_body= mean(body_mass_g)) %>% #finding mean of flipper length and body mass 
  ungroup() #ungrouping 
  
  plot(avg_flip ~ avg_body, data = peng_3b) # plotting to see avg flipper length and avg body mass by species and island
  
```

3c. Plot with the whole dataset. The whole dataset shows a much clearer increase in body mass as flipper size increases. The plot could be clarified if the plot could distinguish between different penguin species. For example, if Adelie data was represented by squares in the plot, if Gentoos were represented by circles and if Chinstraps were represented by triangles the viewer could get a great sense of the different sizes of the different penguins in relation to one another. 
```{r whole_dataset}

whole_data_set <- penguins_no_na %>% #labeling new whole data set with no NAs
  group_by(flipper_length_mm, body_mass_g) %>%
      mutate(avg_flipp = mean(flipper_length_mm),
             avg_bodym = mean(body_mass_g)) %>% #adding average flipper and average body mass columns to the dataset that excludes NAs 
  ungroup()

plot(avg_flipp ~ avg_bodym, data = whole_data_set) #plotting relationship between avg flipper length and average body mass from whole dataset 


```

4a.Obtaining bill length for Gentoo penguins in Biscoe Island using the pull function.
``` {r gentoo_biscoe}

Gentoo_peng <- penguins_no_na %>%
        filter(species == "Gentoo") %>% #grabbing the Gentoo penguins in Biscoe island and putting it into an objet
        pull(bill_length_mm) #pulling out bill_length_mm from Gentoo penguins in Biscoe island

Gentoo_peng #viewing to see if I pulled the right data 

```

4b. Using replicate to calculate standard error of the mean 10 times. Standard error was found to be 0.2847372. 
``` {r replicate}
library(purrr)


replicate(n = 10, sd(Gentoo_peng)/sqrt(length(Gentoo_peng))) #using replicate to get the standard error of the mean 10 times for bill_length 

```

4c.Use map_df() to create a data frame with the mean and sd of different sample sizes using the first 5 through 100 values
``` {r map_df}
library(purrr)

new_df <- map_df(5:100, ~data.frame(n = .x,
                                    m = mean(Gentoo_peng[1:.x]),
                                    s = sd(Gentoo_peng[1:.x]))) #using map_df to create a dataframe using the first 5 through 100 values in the bill length of Gentoo penguins with the mean and sd of different sample sizes. .x helps us use the full dataframe 
              
               

```

4d. Plot the relationship between sample size and SD and sample size versus SE of the mean. What difference do you see and why? 
Standard deviation measures the variability of the datapoints from the mean. Standard error measures how far the mean of the data is from the true mean of the population). The standard error is always smaller than the standard deviation and that is seen in the plots. Standard deviation decreases slightly as our sample size gets bigger. Standard error decreases as our sample size gets bigger. 

``` {r }

plot(s ~ n, data = new_df) #taking the standard deviation from my new_df data frame and plotting it against sample size, defined as n  

gentoo_stderr <- new_df %>%
     mutate(se = s/sqrt(n)) #creating a new data frame and adding a column of standard error which is defined as standard deviation of sample size divided by square root of sample size. 
           

plot(se ~ n, data = gentoo_stderr) #taking the standard error from my gentoo_stderr data frame and plotting it against sample size, defined as n  


attach(gentoo_stderr) #extra credit for using par() to combine both my plots into 1, 2 panel plot
opar <- par()      # make a copy of current settings
par(mfrow=c(1,2)) #setting up one row with 2 plots 
plot(s ~ n, main="SD vs Samp Size") #plot to be displayed on the right, with a title
plot(se ~ n, main="SE vs Samp Size") #plot to be displayed on the left, with a title
par(opar) #resetting to a single plot per panel after making a two-panel plot

```
My github homework link is here: https://github.com/Jbarrone95/Biol-607-Homework-
